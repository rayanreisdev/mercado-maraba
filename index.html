<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css">
  <title>Comercial Maraba</title>
  <style>
    html {
      scroll-behavior: smooth;
    }

    #resultado {
      width: 150px;
      background: white;
      padding: 0;
      margin-top: -20px;
      margin-left: 217px;
      border-radius: 20px;
      list-style: none;
      font-size: 14px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      z-index: 1000;
    }

    #resultado li a {
      color: inherit;
      text-decoration: none;
      cursor: pointer;
      font-size: 14px;
      display: block;
      text-align: center;
    }

    #resultado li {
      text-decoration: none;
      padding: 6px 10px;
      cursor: pointer;
    }

    #resultado li:hover {
      background-color: #f0f0f0;
    }
  </style>
</head>

<body>

  <div class="container">
    <header>
      <h1>Comercial Maraba</h1>
      <nav>
        <a href="#">Inicio</a>
        <a href="#" onclick="abrirWhatsApp('5594984046320')">Contato</a>
        <input type="text" id="searchInput" placeholder="Pesquisar..." />
        <svg class="search-icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="pesqui" onclick="buscar()"
          style="cursor:pointer;">
          <circle cx="11" cy="11" r="7" class="op"></circle>
          <line x1="16.5" y1="16.5" x2="21" y2="21"></line>
        </svg>
      </nav>


    </header>

    <ul id="resultado"></ul>

    <div class="banner">
      <img src="https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?auto=format&fit=crop&w=800&q=80"
        alt="Vegetais frescos" />
    </div>

    <div class="main-content">
      <p>Fucionamento das - 8:00 - 13:00 da 14:00 as 18:00</p>
    </div>

    <section class="featured">
      <h3>Ortifruts</h3>
      <div class="produtos">
        <div class="produto" data-nome="Maçã" id="produto-maca">
          <img src="./frutas/maca.webp"
            alt="Apples" />
          <h4>Maçã</h4>
          <p>R$2,50</p>
          <div class="botoes">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
          </div>
        </div>

        <div class="produto" data-nome="Banana" id="produto-banana">
          <img src="./frutas/banana.webp"
            alt="Bananas" />
          <h4>Banana</h4>
          <p>R$2,50</p>
          <div class="botoes">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
          </div>
        </div>

        <div class="produto" data-nome="melancia" id="produto-melancia">
          <img src="./frutas/melancia.webp"
            alt="Large Eggs" />
          <h4>melancia</h4>
          <p>R$2,50</p>
          <div class="botoes">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
          </div>
        </div>

        <div class="produto" data-nome="Leite" id="produto-leite">
          <img src="./img/leite.webp"
            alt="Milk" />
          <h4>Leite</h4>
          <p>R$2,50</p>
          <div class="botoes">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
          </div>
        </div>
      </div>

      <h3>Mercearia</h3>
      <div class="produtos">
        <div class="produto" data-nome="Arroz" id="produto-arroz">
          <img src="./img/arroz.webp"
            alt="Apples" />
          <h4>Arroz</h4>
          <p>R$2,50</p>
          <div class="botoes">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
          </div>
        </div>

        <div class="produto" data-nome="Feijao" id="produto-feijao">
          <img src="./img/feijao.webp"
            alt="Bananas" />
          <h4>Feijao</h4>
          <p>R$2,50</p>
          <div class="botoes">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
          </div>
        </div>

        <div class="produto" data-nome="macarrao" id="produto-macarrao">
          <img src="./img/macarrao.webp"
            alt="Large Eggs" />
          <h4>macarrao</h4>
          <p>R$2,50</p>
          <div class="botoes">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
          </div>
        </div>

        <div class="produto" data-nome="açucar" id="produto-acucar">
          <img src="./img/acucar.webp"
            alt="Milk" />
          <h4>açucar</h4>
          <p>R$2,50</p>
          <div class="botoes">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Botão e modal do carrinho -->
  <div id="carrinho-btn"><span id="contador">0</span></div>
  <div id="carrinho-modal">
    <h2>Seu carrinho</h2>
    <ul id="lista-carrinho"></ul>
    <button id="finalizar" disabled>Finalizar pedido</button>
    <button id="fechar">Fechar</button>
  </div>

  <script>
    // Código do carrinho sem alterações, ficou tudo igual.
    document.addEventListener('DOMContentLoaded', function () {
      const produtos = document.querySelectorAll('.produto');
      const carrinhoBtn = document.getElementById('carrinho-btn');
      const contador = document.getElementById('contador');
      const carrinhoModal = document.getElementById('carrinho-modal');
      const listaCarrinho = document.getElementById('lista-carrinho');
      const finalizarBtn = document.getElementById('finalizar');
      const fecharBtn = document.getElementById('fechar');

      const carrinho = {};

      function atualizarContador() {
        let total = 0;
        for (let qtd of Object.values(carrinho)) {
          total += qtd;
        }
        contador.textContent = total;
      }

      function atualizarListaCarrinho() {
        listaCarrinho.innerHTML = '';
        let temItem = false;
        for (let [nome, qtd] of Object.entries(carrinho)) {
          if (qtd > 0) {
            const li = document.createElement('li');
            li.textContent = qtd + ' x ' + nome;
            listaCarrinho.appendChild(li);
            temItem = true;
          }
        }
        if (!temItem) {
          listaCarrinho.innerHTML = '<li>Carrinho vazio</li>';
          finalizarBtn.disabled = true;
        } else {
          finalizarBtn.disabled = false;
        }
      }

      produtos.forEach(function (produto) {
        const btnMais = produto.querySelector('.mais');
        const btnMenos = produto.querySelector('.menos');
        const qtdSpan = produto.querySelector('.quantidade');
        const nome = produto.getAttribute('data-nome');

        carrinho[nome] = 0;

        btnMais.addEventListener('click', function () {
          carrinho[nome]++;
          qtdSpan.textContent = carrinho[nome];
          atualizarContador();
          atualizarListaCarrinho();
        });

        btnMenos.addEventListener('click', function () {
          if (carrinho[nome] > 0) {
            carrinho[nome]--;
            qtdSpan.textContent = carrinho[nome];
            atualizarContador();
            atualizarListaCarrinho();
          }
        });
      });

      carrinhoBtn.addEventListener('click', function () {
        if (carrinhoModal.style.display === 'block') {
          carrinhoModal.style.display = 'none';
        } else {
          atualizarListaCarrinho();
          carrinhoModal.style.display = 'block';
        }
      });

      fecharBtn.addEventListener('click', function () {
        carrinhoModal.style.display = 'none';
      });

      finalizarBtn.addEventListener('click', function () {
        const itens = [];
        for (let [nome, qtd] of Object.entries(carrinho)) {
          if (qtd > 0) {
            itens.push(qtd + ' ' + nome.toLowerCase());
          }
        }
        if (itens.length === 0) {
          alert('Seu carrinho está vazio!');
          return;
        }
        const mensagem = 'Olá gostaria de fazer o seguinte pedido, ' + itens.join(', ') + '.';
        const telefone = '94984046320'; // coloque seu telefone aqui
        const url = 'https://wa.me/55' + telefone + '?text=' + encodeURIComponent(mensagem);
        window.open(url, '_blank');
      });
    });
  </script>

  <script>
    function abrirWhatsApp(numero) {
      const url = `https://wa.me/${numero}`;
      window.open(url, '_blank');
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script>
    // Produtos para busca com IDs exatos dos produtos no HTML
    const produtos = [
      { nome: "açucar", id: "produto-acucar" },
      { nome: "Banana", id: "produto-banana" },
      { nome: "Maçã", id: "produto-maca" },
      { nome: "melancia", id: "produto-melancia" },
      { nome: "Leite", id: "produto-leite" },
      { nome: "Arroz", id: "produto-arroz" },
      { nome: "Feijao", id: "produto-feijao" },
      { nome: "macarrao", id: "produto-macarrao" }
    ];

    const options = {
      keys: ['nome'],
      threshold: 0.3,
    };
    const fuse = new Fuse(produtos, options);

    function buscar() {
      const input = document.getElementById('searchInput').value.trim();
      const resultados = fuse.search(input);
      const ul = document.getElementById('resultado');
      ul.innerHTML = '';

      if (input === '') {
        ul.innerHTML = '';
        return;
      }

      if (resultados.length === 0) {
        ul.innerHTML = '<li>Nenhum produto encontrado</li>';
        return;
      }

      resultados.forEach(result => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.textContent = result.item.nome;
        a.href = `#${result.item.id}`;
        li.appendChild(a);
        ul.appendChild(li);
      });
    }
  </script>
</body>

</html>